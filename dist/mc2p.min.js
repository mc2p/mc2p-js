!function(){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,e=function(t,e,i){this.MC2PPublicKey=t,this.token=e,this.API_URL="https://api.mychoice2pay.com/v1/pay/"+this.token+"/",this.API_HTML_URL=this.API_URL+"html/",this.API_CARD_URL=this.API_URL+"card/",this.API_SHARE_URL=this.API_URL+"share/",this.REDIRECT_URL="https://pay.mychoice2pay.com/#/"+this.token+"/redirect/",this.DIVVY_URL="https://pay.mychoice2pay.com/#/"+this.token+"/divvy",this.options={notRedirectHtml:i&&i.notRedirectHtml||!1,htmlDivId:i&&i.htmlDivId||"mc2p-html-div",cardDivId:i&&i.cardDivId||"mc2p-card-div",cardDataNameId:i&&i.cardDataNameId||"mc2p-card-name",cardDataNumberId:i&&i.cardDataNumberId||"mc2p-card-number",cardDataMonthId:i&&i.cardDataMonthId||"mc2p-card-month",cardDataYearId:i&&i.cardDataYearId||"mc2p-card-year",cardDataCVVId:i&&i.cardDataCVVId||"mc2p-card-cvv",iFrameId:i&&i.iFrameId||!1,iFrameGateways:i&&i.iFrameGateways||{}},this.gatewaysList=[],this.gatewaySelected=null},i=function(t,e){return function(i){t.innerHTML=i.html,t.style.visibility="visible",document.querySelector("#"+e.options.htmlDivId+" form").submit()}};e.prototype.__request=function(t,e,i,a){var s=new XMLHttpRequest;if(a&&(s.onreadystatechange=function(){4==s.readyState&&a(JSON.parse(s.responseText))}),s.open(t,e,!!a),s.setRequestHeader("Authorization","PublicKey "+this.MC2PPublicKey),s.setRequestHeader("Content-type","application/json"),s.send(i?JSON.stringify(i):null),!a)return JSON.parse(s.responseText)},e.prototype.getGateways=function(t){if(t){var e=this;return this.__request("GET",this.API_URL,null,function(i){e.gatewaysList=i.gateways,t(i)})}var i=this.__request("GET",this.API_URL,null,t);return this.gatewaysList=i.gateways,i},e.prototype.html=function(t,e){return this.__request("GET",this.API_HTML_URL+t+"/",null,e)},e.prototype.card=function(t,e,i){return this.__request("POST",this.API_CARD_URL+t+"/",e,i)},e.prototype.share=function(t,e){return this.__request("POST",this.API_SHARE_URL,t,e)},e.prototype.selectGateway=function(t){var e=document.getElementById(this.options.htmlDivId),a=document.getElementById(this.options.cardDivId),s=void 0;this.options.iFrameId&&(s=document.getElementById(this.options.iFrameId)),e&&(e.style.visibility="hidden"),a&&(a.style.visibility="hidden"),s&&(s.style.visibility="hidden");for(var o=0;o<this.gatewaysList.length;o++)if(this.gatewaysList[o].code===t){var r=this.gatewaysList[o];if("card"===r.form)a.style.visibility="visible";else if("html"===r.form)if(this.options.notRedirectHtml)this.html(t,i(e,this));else{var n=this.REDIRECT_URL+r.code;!s||r.code in this.options.iFrameGateways&&!this.options.iFrameGateways[r.code]?document.location=n:(s.setAttribute("src",n),s.style.visibility="visible")}else if("shared"===r.form)if(!s||r.code in this.options.iFrameGateways&&!this.options.iFrameGateways[r.code])document.location=this.DIVVY_URL;else{var d=this.DIVVY_URL+"/iframe";s.setAttribute("src",d),s.style.visibility="visible"}this.gatewaySelected=r;break}},e.prototype.sendCardDetails=function(t){var e={name:document.getElementById(this.options.cardDataNameId).value,number:document.getElementById(this.options.cardDataNumberId).value,month:document.getElementById(this.options.cardDataMonthId).value,year:document.getElementById(this.options.cardDataYearId).value,verification_value:document.getElementById(this.options.cardDataCVVId).value};return this.card(this.gatewaySelected.code,e,t)},"undefined"==typeof exports||exports.nodeType?t.MC2P=e:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=e),exports.MC2P=e)}();